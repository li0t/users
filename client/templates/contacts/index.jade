md-toolbar.md-padding.lightBlue(layout='row' layout-align='start end')
  div
    h2 Contactos
    
    md-button(ng-href='/search')
      md-icon(md-font-icon='material-icons') more
      | Entradas
      
    md-button(ng-href='/contacts')
      md-icon(md-font-icon='material-icons') group
      | Personas
  
md-progress-circular(ng-show='fetchingContacts || fetchingPending || inviting' md-mode='indeterminate') 
  
md-content.md-padding
  div.form-group(ng-show='!fetchingContacts && contacts')
    md-input-container
      label Busca un Contacto
      input.form-control(
        ng-model='searchContact',
        ng-change='resetFound()')
        
    md-button(
      ng-click='search()'
      ng-show='!fetchingContacts && searchContact.length && !filteredContacts.length')
      | Buscar en eMeeter
       
  div(ng-show='!fetchingPending && pendings.length')
    h4
      md-icon(md-font-icon='material-icons' ) add
      | Solicitudes de contacto
              
  md-list(ng-show='!fetchingPending && pendings')
    md-list-item(ng-repeat='pending in pendings', ng-init='confirm = ("/contacts/confirm/{0}" | format : pending.token); reject = ("/contacts/reject/{0}" | format : pending._id)')
      p {{ pending.profile.name || pending.email }}
      div
        md-button(ng-href='{{ confirm }}') Confirmar
        md-button(ng-href='{{ reject }}') Rechazar        

  div(ng-show='!fetchingContacts && contacts')
    h4
      md-icon(md-font-icon='material-icons' ) radio_button_unchecked
      | {{ contacts.length && "Contactos" || "No hay Contactos" }}

  md-grid-list(
    md-gutter="12px" md-gutter-gt-sm="8px"
    md-cols="4"
    md-row-height="1:1")
    
    md-grid-tile(
      md-rowspan="1"
      md-colspan="1"
      ng-repeat='contact in filteredContacts = (contacts | filter: searchContact)'
      ng-init='href = ("/users/{0}/detail" | format : contact._id); delete = ("/contacts/delete/{0}" | format : contact._id)')
        p {{ contact.user.profile.name || contact.user.email }}
        md-button(ng-href='{{ delete }}')
          md-icon(md-font-icon='material-icons' ) close
          |  Eliminar
        
  md-button(ng-show='foundUser' ng-href='/contacts/add/{{foundUser._id}}')
    p {{ foundUser.email }}
    md-icon(md-font-icon='material-icons' ) add
    | Agregar
  
  md-button(ng-disabled='inviting' ng-show='notFoundUser' ng-click='inviteNotFound()')
    p {{ notFoundUser }}
    md-icon(md-font-icon='material-icons' ) add
    | Invitar a emeeter          
            
  div(ng-show='foundPendingUser')
    p {{ foundPendingUser.email }}
    md-icon(md-font-icon='material-icons' ) access_time
    | Esperando confirmaci√≥n      
